var test = {
    "result": [
        {
            "id": "1726",
            "pid": "null",
            "type": "project",
            "name": "项目一",
            "level": "1",
            "owner": "张胜军",
            "job": "null",
            "area": "null",
            "children": [
                {
                    "id": "1",
                    "pid": "1726",
                    "type": "project",
                    "name": "clodtest",
                    "level": "2",
                    "owner": "null",
                    "job": "null",
                    "area": "null",
                    "children": [
                        {
                            "id": "11",
                            "pid": "1",
                            "type": "employee",
                            "name": "王晓媛",
                            "level": "null",
                            "owner": "null",
                            "job": "web",
                            "area": "成都",
                            "children": []
                        },
                        {
                            "id": "12",
                            "pid": "1",
                            "type": "employee",
                            "name": "王鑫",
                            "level": "null",
                            "owner": "null",
                            "job": "测试",
                            "area": "西安",
                            "children": []
                        },
                    ]
                },
                {
                    "id": "2",
                    "pid": "1726",
                    "type": "project",
                    "name": "API",
                    "level": "2",
                    "owner": "null",
                    "job": "null",
                    "area": "null",
                    "children": [
                        {
                            "id": "22",
                            "pid": "2",
                            "type": "employee",
                            "name": "李增益",
                            "level": "null",
                            "owner": "null",
                            "job": "web",
                            "area": "北京",
                            "children": []
                        },
                        {
                            "id": "23",
                            "pid": "2",
                            "type": "employee",
                            "name": "杜红",
                            "level": "null",
                            "owner": "null",
                            "job": "java",
                            "area": "深圳",
                            "children": []
                        },
                        {
                            "id": "24",
                            "pid": "2",
                            "type": "employee",
                            "name": "银鑫",
                            "level": "null",
                            "owner": "null",
                            "job": "java",
                            "area": "西安",
                            "children": []
                        }
                    ]
                },
                {
                    "id": "3",
                    "pid": "1726",
                    "type": "project",
                    "name": "UI",
                    "level": "2",
                    "owner": "null",
                    "job": "null",
                    "area": "null",
                    "children": [
                        {
                            "id": "33",
                            "pid": "3",
                            "type": "employee",
                            "name": "杨锁",
                            "level": "null",
                            "owner": "null",
                            "job": "web",
                            "area": "北京",
                            "children": []
                        },
                        {
                            "id": "34",
                            "pid": "3",
                            "type": "employee",
                            "name": "张三",
                            "level": "null",
                            "owner": "null",
                            "job": "测试",
                            "area": "成都",
                            "children": []
                        },
                    ]
                }
            ],
        },
        {
            "id": "1727",
            "pid": "null",
            "type": "project",
            "name": "项目二",
            "level": "1",
            "owner": "付顺",
            "job": "null",
            "area": "null",
            "children": [
                {
                    "id": "01",
                    "pid": "1727",
                    "type": "project",
                    "name": "clodtest二",
                    "level": "2",
                    "owner": "null",
                    "job": "null",
                    "area": "null",
                    "children": [
                        {
                            "id": "011",
                            "pid": "01",
                            "type": "project",
                            "name": "NUV运维",
                            "level": "3",
                            "owner": "null",
                            "job": "null",
                            "area": "null",
                            "children": [
                                {
                                    "id": "022",
                                    "pid": "011",
                                    "type": "employee",
                                    "name": "李增益",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "web",
                                    "area": "北京",
                                    "children": []
                                },
                                {
                                    "id": "023",
                                    "pid": "011",
                                    "type": "employee",
                                    "name": "李益",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "java",
                                    "area": "深圳",
                                    "children": []
                                }
                            ]
                        },
                        {
                            "id": "011",
                            "pid": "01",
                            "type": "project",
                            "name": "测试平台",
                            "level": "3",
                            "owner": "null",
                            "job": "null",
                            "area": "null",
                            "children": [
                                {
                                    "id": "022",
                                    "pid": "011",
                                    "type": "employee",
                                    "name": "李四",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "web",
                                    "area": "北京",
                                    "children": []
                                },
                                {
                                    "id": "023",
                                    "pid": "011",
                                    "type": "employee",
                                    "name": "李益",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "java",
                                    "area": "西安",
                                    "children": []
                                }
                            ]
                        }

                    ]
                },
                {
                    "id": "02",
                    "pid": "1727",
                    "type": "project",
                    "name": "API二",
                    "level": "2",
                    "owner": "null",
                    "job": "null",
                    "area": "null",
                    "children": [
                        {
                            "id": "012",
                            "pid": "02",
                            "type": "project",
                            "name": "NUV平台",
                            "level": "3",
                            "owner": "null",
                            "job": "null",
                            "area": "null",
                            "children": [
                                {
                                    "id": "023",
                                    "pid": "012",
                                    "type": "employee",
                                    "name": "王磊",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "web",
                                    "area": "北京",
                                    "children": []
                                },
                                {
                                    "id": "024",
                                    "pid": "012",
                                    "type": "employee",
                                    "name": "李益",
                                    "level": "null",
                                    "owner": "null",
                                    "job": "web",
                                    "area": "西安",
                                    "children": []
                                }
                            ]
                        },

                    ]
                }


            ],
        }

    ],
    "error": "",
    "status": "success"
}
let str = "";
let areas = [];
$(function () {

    function TraversalObject(obj) {

        // console.log(obj)  
        if (obj.type == "project") {
            if(obj.level=="1"){
                str += `<ul><li>${obj.name}(${obj.owner})</li></ul>`
            }  
          else if(obj.level=="2"){
            // console.log(obj.level,obj.name)        
               str += `<ul class="treeBox_ul"><li>${obj.name}</li></ul>`
            }
            else if(obj.level=="3"){
                // console.log(obj.level,obj.name)
                    let str2="";
                    str2+=`<li>${obj.name}</li>`
                    str += `<ul class="treeBox_ul clear">${str2}</ul>`         
            }
            $(`#treeBox`).html(str)
        }
        else if (obj.type == "employee") {
            areas.push(obj.area)
        }

        for (var a in obj) {
            if (typeof (obj[a]) == "object") {
                for (let j = 0; j < obj[a].length; j++) {                
                    TraversalObject(obj[a][j]); //递归遍历        
                }
            }
        }
    }
    function unique(arr) {
        var newArr = [arr[0]];
        for (var i = 1; i < arr.length; i++) {
            if (newArr.indexOf(arr[i]) == -1) {
                newArr.push(arr[i]);
            }
        }
        return newArr;
    }
    unique(areas);


    for (let i of test.result) {
        $("#tabs").append(`<li id="${i.id}">${i.name}</li>`);//导航
    }
    $("#tabs").delegate('li', 'click', function (e) {
        areas = [];
        str = "";
        //console.log(e.target.id)
        let chooseBbj = {};
        for (let i = 0; i < test.result.length; i++) {
            console.log(e.target.id)
            if (e.target.id == test.result[i].id) {
                chooseBbj = test.result[i];
                // console.log(chooseBbj)
                TraversalObject(chooseBbj)
                // console.log(unique(areas))
                return;
            }
        }

    })





})